(this.webpackJsonpshadowcode=this.webpackJsonpshadowcode||[]).push([[0],{73:function(t,e,a){"use strict";a.r(e);var n=a(4),s=a(0),i=a.n(s),r=a(16),o=a.n(r),c=a(31),l=a(24),u=a.n(l),m=a(34),d=a(35),h=a(36),p=a(9),g=a(53),f=a(52),b=a(91),j=a(54),v=a(95),S=a(94),x=a(92),k=a(93),I=a(89),O=a(96),w=a(97),y={global:{colors:{},font:{family:"Roboto",size:"14px",height:"20px",color:"rgb(68, 68, 68)"}}},T=function(t){Object(g.a)(a,t);var e=Object(f.a)(a);function a(t){var n;return Object(d.a)(this,a),(n=e.call(this,t)).state={token:null,streamId:null,streamTime:"",streamStartTime:"",timecodes:[],textInputValue:"",preparedList:"",clock:null,streamEnded:!1},n.setToken=n.setToken.bind(Object(p.a)(n)),n.setStream=n.setStream.bind(Object(p.a)(n)),n.addTimeCode=n.addTimeCode.bind(Object(p.a)(n)),n.complete=n.complete.bind(Object(p.a)(n)),n.newStream=n.newStream.bind(Object(p.a)(n)),n.clockTick=n.clockTick.bind(Object(p.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var t=localStorage.getItem("token");if(null!==t){this.setState({token:t});var e=localStorage.getItem("stream"),a=localStorage.getItem("timecodes");null!==e&&(this.setStream(e,t),a&&this.setState({timecodes:JSON.parse(a)}))}}},{key:"getVideoInfo",value:function(){var t=Object(m.a)(u.a.mark((function t(e){var a,n,s,i,r,o=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:null,n=new URL("https://www.googleapis.com/youtube/v3/videos"),s={part:"snippet,liveStreamingDetails",id:e,key:a||this.state.token},n.search=new URLSearchParams(s).toString(),t.next=6,fetch(n.href);case 6:if((i=t.sent).ok){t.next=9;break}throw i.status;case 9:return t.next=11,i.json();case 11:return r=t.sent,t.abrupt("return",r.items[0]);case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setToken",value:function(){var t=this,e=this.state.textInputValue;this.getVideoInfo("dQw4w9WgXcQ",e).then((function(){localStorage.setItem("token",e),t.setState({token:e,textInputValue:""})}))}},{key:"getDelta",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=(e||new Date)-t;return{hours:Math.floor(a/36e5%24),minutes:Math.floor(a/6e4%60),seconds:Math.floor(a/1e3%60)}}},{key:"parseYoutubeUrl",value:function(t){t.startsWith("http")||(t="https://".concat(t));try{t=new URL(t)}catch(e){return null}return"youtu.be"===t.hostname?t.pathname.slice(1):["youtube.com","www.youtube.com"].indexOf(t.hostname)>0&&t.searchParams.get("v")?t.searchParams.get("v"):null}},{key:"setStream",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.state.textInputValue,s=e||this.parseYoutubeUrl(n);null!==s&&this.getVideoInfo(s,a).then((function(e){if(void 0!==e.liveStreamingDetails&&void 0!==e.liveStreamingDetails.actualStartTime){var a=void 0!==e.liveStreamingDetails.actualEndTime,n=t.getDelta(new Date(e.liveStreamingDetails.actualStartTime),a&&new Date(e.liveStreamingDetails.actualEndTime)),i=n.hours,r=n.minutes,o=n.seconds;localStorage.setItem("stream",s),t.setState({streamId:s,streamTime:"PT".concat(i,"H").concat(r,"M").concat(o,"S"),streamStartTime:new Date(e.liveStreamingDetails.actualStartTime),textInputValue:"",clock:a?null:setInterval(t.clockTick,1e3),streamEnded:a})}}))}},{key:"addTimeCode",value:function(){var t=this;if(this.state.textInputValue){var e=this.getDelta(this.state.streamStartTime),a=e.hours,n=e.minutes,s=e.seconds,i=function(t,e){return String(t).padStart(e,"0")},r=0!==a?"".concat(a,":").concat(i(n,2),":").concat(i(s,2)):"".concat(n,":").concat(i(s,2)),o=this.parseYoutubeUrl(this.state.textInputValue);if(null===o){var c=[{name:this.state.textInputValue,id:null,start:r,n:this.state.timecodes.length+1}].concat(this.state.timecodes);this.setState({timecodes:c,textInputValue:""}),localStorage.setItem("timecodes",JSON.stringify(c))}else this.getVideoInfo(o).then((function(e){var a=[{name:e.snippet.title,id:o,start:r,n:t.state.timecodes.length+1}].concat(t.state.timecodes);t.setState({timecodes:a,textInputValue:""}),localStorage.setItem("timecodes",JSON.stringify(a))}))}}},{key:"complete",value:function(){var t=this.state.timecodes;clearInterval(this.state.clock),localStorage.removeItem("stream"),localStorage.removeItem("timecodes");var e=t.sort((function(t,e){return new Date(t.start)-new Date(e.state)})).filter((function(t){return null!==t.id})).map((function(t){return t.name+"\nhttps://youtu.be/"+t.id+"\n"})).join("\n"),a="0:00 \u041d\u0430\u0447\u0430\u043b\u043e \u0441\u0442\u0440\u0438\u043c\u0430\n"+t.reverse().map((function(t){return t.start+" "+t.name})).join("\n");this.setState({preparedList:"\u0422\u0430\u0439\u043c\u043a\u043e\u0434\u044b:\n".concat(a,"\n\n\u0412\u0438\u0434\u0435\u043e:\n").concat(e)})}},{key:"newStream",value:function(){this.setState({streamId:null,streamTime:"",streamStartTime:"",timecodes:[],textInputValue:"",preparedList:""})}},{key:"clockTick",value:function(){var t=this.getDelta(this.state.streamStartTime),e=t.hours,a=t.minutes,n=t.seconds;this.setState({streamTime:"PT".concat(e,"H").concat(a,"M").concat(n,"S")})}},{key:"render",value:function(){var t=this;return Object(n.jsx)(b.a,{theme:y,themeMode:"dark",full:!0,children:Object(n.jsxs)(j.a,{align:"center",pad:"small",gap:"large",children:[Object(n.jsx)(j.a,{background:"brand",pad:{left:"medium",right:"medium"},children:Object(n.jsx)(v.a,{size:"s",children:"\u0422\u0430\u0439\u043c\u043a\u043e\u0434\u0435\u0440 3000"})}),!this.state.token&&Object(n.jsxs)(j.a,{gap:"small",animation:"fadeIn",children:[Object(n.jsx)(S.a,{type:"password",placeholder:"\u0422\u043e\u043a\u0435\u043d \u044e\u0442\u0443\u0431\u0430",value:this.state.textInputValue,onChange:function(e){return t.setState({textInputValue:e.target.value})}}),Object(n.jsx)(x.a,{primary:!0,label:"\u0414\u0430\u043b\u0435\u0435",onClick:this.setToken})]}),this.state.token&&!this.state.streamId&&Object(n.jsxs)(j.a,{gap:"small",animation:"fadeIn",children:[Object(n.jsx)(S.a,{placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0441\u0442\u0440\u0438\u043c",value:this.state.textInputValue,onChange:function(e){return t.setState({textInputValue:e.target.value})}}),Object(n.jsx)(x.a,{primary:!0,label:"\u0414\u0430\u043b\u0435\u0435",onClick:function(){return t.setStream()}})]}),!this.state.preparedList&&this.state.token&&this.state.streamId&&Object(n.jsxs)(j.a,{gap:"large",align:"center",children:[Object(n.jsxs)(j.a,{direction:"row",gap:"medium",animation:"fadeIn",flex:"grow",children:[Object(n.jsx)(k.a,{type:"digital",size:"xxlarge",time:this.state.streamTime,run:!1}),Object(n.jsx)(x.a,{label:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c",onClick:this.complete})]}),Object(n.jsxs)(j.a,{direction:"row",gap:"medium",animation:"fadeIn",flex:"grow",children:[Object(n.jsx)(S.a,{placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0432\u0438\u0434\u0435\u043e \u0438\u043b\u0438 \u0442\u0435\u043a\u0441\u0442",value:this.state.textInputValue,onChange:function(e){return t.setState({textInputValue:e.target.value})}}),Object(n.jsx)(x.a,{primary:!0,label:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",disabled:this.state.streamEnded,onClick:this.addTimeCode})]}),Object(n.jsx)(j.a,{animation:"fadeIn",align:"center",children:Object(n.jsx)(I.a,{columns:[{property:"n",header:"#",primary:!0},{property:"name",header:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",render:function(t){return Object(n.jsx)(O.a,{children:t.name.length<48?t.name:t.name.slice(0,48)+"..."})}},{property:"start",header:"\u041d\u0430\u0447\u0430\u043b\u043e"},{header:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",render:function(e){return Object(n.jsx)(x.a,{onClick:function(){var a=t.state.timecodes.filter((function(t){return t.n!==e.n})).map((function(e,a){return Object(c.a)(Object(c.a)({},e),{},{n:t.state.timecodes.length-a-1})}));t.setState({timecodes:a}),localStorage.setItem("timecodes",JSON.stringify(a))},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}}],data:this.state.timecodes})})]}),this.state.preparedList&&Object(n.jsxs)(j.a,{gap:"medium",animation:"fadeIn",children:[Object(n.jsx)(w.a,{value:this.state.preparedList}),Object(n.jsx)(x.a,{label:"\u041d\u043e\u0432\u044b\u0439 \u0441\u0442\u0440\u0438\u043c",onClick:this.newStream})]})]})})}}]),a}(s.Component),V=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,98)).then((function(e){var a=e.getCLS,n=e.getFID,s=e.getFCP,i=e.getLCP,r=e.getTTFB;a(t),n(t),s(t),i(t),r(t)}))};o.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(T,{})}),document.getElementById("root")),V()}},[[73,1,2]]]);