(this.webpackJsonpshadowcode=this.webpackJsonpshadowcode||[]).push([[0],{72:function(t,e,a){"use strict";a.r(e);var n=a(4),s=a(0),i=a.n(s),r=a(16),c=a.n(r),o=a(24),l=a.n(o),u=a(33),h=a(34),d=a(35),m=a(9),p=a(52),b=a(51),j=a(90),f=a(53),g=a(94),x=a(93),k=a(91),v=a(92),I=a(88),O=a(95),S=a(96),w={global:{colors:{},font:{family:"Roboto",size:"14px",height:"20px",color:"rgb(68, 68, 68)"}}},y=function(t){Object(p.a)(a,t);var e=Object(b.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state={token:null,streamId:null,streamTime:"",streamStartTime:"",timecodes:[],textInputValue:"",preparedList:"",clock:null},n.setToken=n.setToken.bind(Object(m.a)(n)),n.setStream=n.setStream.bind(Object(m.a)(n)),n.addTimeCode=n.addTimeCode.bind(Object(m.a)(n)),n.complete=n.complete.bind(Object(m.a)(n)),n.newStream=n.newStream.bind(Object(m.a)(n)),n.clockTick=n.clockTick.bind(Object(m.a)(n)),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var t=localStorage.getItem("token");null!==t&&this.setState({token:t})}},{key:"getVideoInfo",value:function(){var t=Object(u.a)(l.a.mark((function t(e){var a,n,s,i,r,c=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:null,n=new URL("https://www.googleapis.com/youtube/v3/videos"),s={part:"snippet",id:e,key:a||this.state.token},n.search=new URLSearchParams(s).toString(),t.next=6,fetch(n.href);case 6:if((i=t.sent).ok){t.next=9;break}throw i.status;case 9:return t.next=11,i.json();case 11:return r=t.sent,t.abrupt("return",r.items[0]);case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setToken",value:function(){var t=this,e=this.state.textInputValue;this.getVideoInfo("dQw4w9WgXcQ",e).then((function(){localStorage.setItem("token",e),t.setState({token:e,textInputValue:""})}))}},{key:"getDelta",value:function(t){var e=new Date-t;return{hours:Math.floor(e/36e5%24),minutes:Math.floor(e/6e4%60),seconds:Math.floor(e/1e3%60)}}},{key:"parseYoutubeUrl",value:function(t){t.startsWith("http")||(t="https://".concat(t));try{t=new URL(t)}catch(e){return null}return"youtu.be"===t.hostname?t.pathname.slice(1):["youtube.com","www.youtube.com"].indexOf(t.hostname)>0&&t.searchParams.get("v")?t.searchParams.get("v"):null}},{key:"setStream",value:function(){var t=this,e=this.state.textInputValue,a=this.parseYoutubeUrl(e);null!==a&&this.getVideoInfo(a).then((function(e){if("live"===e.snippet.liveBroadcastContent){var n=t.getDelta(new Date(e.snippet.publishedAt)),s=n.hours,i=n.minutes,r=n.seconds;t.setState({streamId:a,streamTime:"PT".concat(s,"H").concat(i,"M").concat(r,"S"),streamStartTime:new Date(e.snippet.publishedAt),textInputValue:"",clock:setInterval(t.clockTick,1e3)})}}))}},{key:"addTimeCode",value:function(){var t=this;if(this.state.textInputValue){var e=this.getDelta(this.state.streamStartTime),a=e.hours,n=e.minutes,s=e.seconds,i=function(t,e){return String(t).padStart(e,"0")},r=0!==a?"".concat(a,":").concat(i(n,2),":").concat(i(s,2)):"".concat(n,":").concat(i(s,2)),c=this.parseYoutubeUrl(this.state.textInputValue);console.log(this.state.timecodes),null===c?this.setState({timecodes:[{name:this.state.textInputValue,id:null,start:r,n:this.state.timecodes.length+1}].concat(this.state.timecodes),textInputValue:""}):this.getVideoInfo(c).then((function(e){t.setState({timecodes:[{name:e.snippet.title,id:c,start:r,n:t.state.timecodes.length+1}].concat(t.state.timecodes),textInputValue:""})}))}}},{key:"complete",value:function(){var t=this.state.timecodes;clearInterval(this.state.clock),this.setState({preparedList:"\u0422\u0430\u0439\u043c\u043a\u043e\u0434\u044b:\n".concat(t.reverse().map((function(t){return t.start+" "+t.name})).join("\n"),"\n\n")+"\u0412\u0438\u0434\u0435\u043e:\n".concat(t.reverse().filter((function(t){return null!==t.id})).map((function(t){return t.name+"\nhttps://youtu.be/"+t.id+"\n"})).join("\n"))})}},{key:"newStream",value:function(){this.setState({streamId:null,streamTime:"",streamStartTime:"",timecodes:[],textInputValue:"",preparedList:""})}},{key:"clockTick",value:function(){var t=this.getDelta(this.state.streamStartTime),e=t.hours,a=t.minutes,n=t.seconds;this.setState({streamTime:"PT".concat(e,"H").concat(a,"M").concat(n,"S")})}},{key:"render",value:function(){var t=this;return Object(n.jsx)(j.a,{theme:w,themeMode:"dark",full:!0,children:Object(n.jsxs)(f.a,{align:"center",pad:"small",gap:"large",children:[Object(n.jsx)(f.a,{background:"brand",pad:{left:"medium",right:"medium"},children:Object(n.jsx)(g.a,{size:"s",children:"\u0422\u0430\u0439\u043c\u043a\u043e\u0434\u0435\u0440 3000"})}),!this.state.token&&Object(n.jsxs)(f.a,{gap:"small",animation:"fadeIn",children:[Object(n.jsx)(x.a,{type:"password",placeholder:"\u0422\u043e\u043a\u0435\u043d \u044e\u0442\u0443\u0431\u0430",value:this.state.textInputValue,onChange:function(e){return t.setState({textInputValue:e.target.value})}}),Object(n.jsx)(k.a,{primary:!0,label:"\u0414\u0430\u043b\u0435\u0435",onClick:this.setToken})]}),this.state.token&&!this.state.streamId&&Object(n.jsxs)(f.a,{gap:"small",animation:"fadeIn",children:[Object(n.jsx)(x.a,{placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0441\u0442\u0440\u0438\u043c",value:this.state.textInputValue,onChange:function(e){return t.setState({textInputValue:e.target.value})}}),Object(n.jsx)(k.a,{primary:!0,label:"\u0414\u0430\u043b\u0435\u0435",onClick:this.setStream})]}),!this.state.preparedList&&this.state.token&&this.state.streamId&&Object(n.jsxs)(f.a,{gap:"large",align:"center",children:[Object(n.jsxs)(f.a,{direction:"row",gap:"medium",animation:"fadeIn",flex:"grow",children:[Object(n.jsx)(v.a,{type:"digital",size:"xxlarge",time:this.state.streamTime}),Object(n.jsx)(k.a,{label:"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c",onClick:this.complete})]}),Object(n.jsxs)(f.a,{direction:"row",gap:"medium",animation:"fadeIn",flex:"grow",children:[Object(n.jsx)(x.a,{placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0432\u0438\u0434\u0435\u043e \u0438\u043b\u0438 \u0442\u0435\u043a\u0441\u0442",value:this.state.textInputValue,onChange:function(e){return t.setState({textInputValue:e.target.value})}}),Object(n.jsx)(k.a,{primary:!0,label:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",onClick:this.addTimeCode})]}),Object(n.jsx)(f.a,{animation:"fadeIn",align:"center",children:Object(n.jsx)(I.a,{columns:[{property:"n",header:"#",primary:!0},{property:"name",header:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",render:function(t){return Object(n.jsx)(O.a,{children:t.name.length<48?t.name:t.name.slice(0,48)+"..."})}},{property:"start",header:"\u041d\u0430\u0447\u0430\u043b\u043e"}],data:this.state.timecodes})})]}),this.state.preparedList&&Object(n.jsxs)(f.a,{gap:"medium",animation:"fadeIn",children:[Object(n.jsx)(S.a,{value:this.state.preparedList}),Object(n.jsx)(k.a,{label:"\u041d\u043e\u0432\u044b\u0439 \u0441\u0442\u0440\u0438\u043c",onClick:this.newStream})]})]})})}}]),a}(s.Component),T=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,97)).then((function(e){var a=e.getCLS,n=e.getFID,s=e.getFCP,i=e.getLCP,r=e.getTTFB;a(t),n(t),s(t),i(t),r(t)}))};c.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(y,{})}),document.getElementById("root")),T()}},[[72,1,2]]]);